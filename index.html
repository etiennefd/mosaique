<!DOCTYPE html>
<html>
<head>
    <title>Mosa√Øque</title>
    <!-- Add vanilla-picker CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vanilla-picker@2/dist/vanilla-picker.csp.css">
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Prevent body scrollbars if container is 100vw/vh */
            font-family: sans-serif; /* Moved from options-panel for consistency */
        }

        #canvas-container {
            position: fixed; /* Or absolute if body has no other content */
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            overflow: auto; /* This enables scrollbars */
            z-index: 1; /* Below options panel */
        }

        /* Canvases are absolutely positioned within the container */
        #mosaicCanvas,
        #previewCanvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            /* width/height attributes set by JS to logicalCanvasWidth/Height */
        }

        #previewCanvas {
            z-index: 5; /* Preview above main canvas */
            pointer-events: none;
        }

        #mosaicCanvas {
            z-index: 1; /* Main canvas below preview */
            background-color: #FFFFFF; /* Keep background on main canvas */
        }

        #options-panel {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background-color: rgba(240, 240, 240, 0.9);
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
            /* font-family: sans-serif; removed, moved to body */
            font-size: 12px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 10; /* Ensure it's above the canvas-container */
        }

        .panel-section {
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-bottom: 5px;
        }
        .panel-section:last-child {
             border-bottom: none;
             margin-bottom: 0;
             padding-bottom: 0;
        }
        .panel-section h4 {
             margin-top: 0;
             margin-bottom: 5px;
             font-size: 13px;
        }

        .tool-options button,
        .color-options .color-swatch {
            border: 1px solid #aaa;
            background-color: #fff;
            padding: 5px;
            margin: 2px;
            border-radius: 3px;
            cursor: pointer;
            min-width: 25px; /* Ensure buttons have some width */
            text-align: center;
        }
        .tool-options button:hover {
            background-color: #eee;
        }
        .tool-options button.selected {
            background-color: #cce;
            border-color: #88a;
            font-weight: bold;
        }

        .color-options {
             /* Keep padding/margin if needed, but display:flex moves */
        }

        /* New style for the inner container */
        .color-swatch-container {
            display: flex; /* Arrange items in a row */
            flex-wrap: wrap;
            gap: 4px;
        }

        .color-options .color-swatch {
            width: 20px;
            height: 20px;
            padding: 0; /* Remove padding for swatches */
        }
        .color-options .color-swatch.selected {
            border: 2px solid black;
            box-shadow: 0 0 3px rgba(0,0,0,0.5);
        }

        /* Style for the non-selectable spacing swatch */
        .color-options .special-swatch {
            font-size: 9px; /* Make text smaller */
            line-height: 20px; /* Vertically center text */
            text-align: center;
            color: #555;
            border-style: dashed; /* Different border */
        }

        /* Optional: Style the picker popup if needed */
        .picker_wrapper {
             z-index: 20; /* Ensure picker is above options panel */
        }
    </style>
</head>
<body>
    <div id="canvas-container">
        <canvas id="mosaicCanvas"></canvas>
        <canvas id="previewCanvas"></canvas>
    </div>

    <div id="options-panel">
        <div class="panel-section tool-options">
            <h4>Tools</h4>
            <button id="tool-pencil" title="Pencil (B/P)">‚úèÔ∏è/B</button>
            <button id="tool-bucket" title="Paint Bucket (G)">ü™£/G</button>
            <button id="tool-line" title="Line (L)">üìè/L</button>
            <button id="tool-rectangle" title="Rectangle (R)">‚¨ú/R</button>
            <button id="tool-circle" title="Circle (C)">‚ö™/C</button>
            <button id="tool-select" title="Selection (S)">‚úÇÔ∏è/S</button>
        </div>
        <div class="panel-section color-options">
             <h4>Colors</h4>
             <div class="color-swatch-container">
                 <div class="color-swatch" id="color-0" style="background-color: #00008B;" title="Dark Blue"></div>
                 <div class="color-swatch" id="color-1" style="background-color: #0000CD;" title="Medium Blue"></div>
                 <div class="color-swatch" id="color-2" style="background-color: #4169E1;" title="Royal Blue"></div>
                 <div class="color-swatch" id="color-3" style="background-color: #6495ED;" title="Cornflower Blue"></div>
                 <div class="color-swatch" id="color-4" style="background-color: #ADD8E6;" title="Light Blue"></div>
                 <div class="color-swatch" id="color-5" style="background-color: #FFD700;" title="Gold"></div>
                 <div class="color-swatch" id="color-6" style="background-color: #EEE8AA;" title="Pale Goldenrod"></div>
                 <div class="color-swatch" id="color-7" style="background-color: #FFFFFF;" title="White"></div>
                 <div class="color-swatch" id="color-8" style="background-color: #E0E0E0;" title="Pale Gray"></div>
                 <div class="color-swatch special-swatch" id="color-9" style="background-color: #FFFFFF;" title="Spacing Color">BG</div>
             </div>
        </div>
        <div class="panel-section grid-config-options">
            <h4>Grid Configuration</h4>
            <div>
                <label for="pixelSizeInput">Pixel Size (1-15):</label>
                <input type="number" id="pixelSizeInput" min="1" max="15" value="5">
            </div>
            <div>
                <label for="spacingInput">Spacing (0-5):</label>
                <input type="number" id="spacingInput" min="0" max="5" value="1">
            </div>
            <div>
                <label for="gridRowsInput">Grid Rows (10-500):</label>
                <input type="number" id="gridRowsInput" min="10" max="500" value="200">
            </div>
            <div>
                <label for="gridColsInput">Grid Columns (10-800):</label>
                <input type="number" id="gridColsInput" min="10" max="800" value="400">
            </div>
        </div>
    </div>

    <!-- Remove or comment out the hidden input -->
    <!-- <input type="color" id="hidden-color-picker" style="position: absolute; left: -9999px; visibility: hidden;"> -->

    <!-- Add vanilla-picker JS -->
    <script src="https://cdn.jsdelivr.net/npm/vanilla-picker@2/dist/vanilla-picker.min.js"></script>
    <script src="script.js"></script>
</body>
</html> 